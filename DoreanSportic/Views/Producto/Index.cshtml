@model IEnumerable<DoreanSportic.Application.DTOs.ProductoDTO>

@{
    ViewData["Title"] = "Index";
}

<div class="w-screen flex justify-center items-center">
    <div class="text-center flex flex-row gap-2 justify-center">
        <p class="text-purple-600"><b>Ropa</b> </p>
        <input type="checkbox"
               checked="checked"
               class="toggle border-purple-600 bg-purple-400 checked:border-orange-500 checked:bg-orange-400 checked:text-orange-800" />
        <p class="text-orange-500"><b>Accesorios</b></p>
    </div>
</div>
<br />

<div id="card-productos-body" class="pl-5 flex flex-wrap gap-4 justify-center">
    @await Html.PartialAsync("_CardsProducto", Model)
</div>

@section Scripts {
    <script>
        const toggle = document.querySelector('input[type="checkbox"]');

                function cargarProductosPorCategoria() {
            fetch(`/Producto/FiltrarPorCategoria?idCategoria=${idCategoria}`)
                .then(res => res.text())
                .then(html => {
                    document.getElementById('card-productos-body').innerHTML = html;
                })
                .catch(error => console.error("Error al cargar productos:", error));
        }

        // Cargar categoría por defecto (Ropa: id = 1) al cargar la página
        document.addEventListener('DOMContentLoaded', function () {
            cargarProductosPorCategoria(1);
            toggle.checked = false; // visualmente reflejar que Ropa está seleccionado
        });

        // Manejar cambio de toggle
        toggle.addEventListener('change', () => {
            const idCategoria = toggle.checked ? 2 : 1;
            cargarProductosPorCategoria(idCategoria);
        });
    </script>
}
